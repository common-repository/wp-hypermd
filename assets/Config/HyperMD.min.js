!function(h,e,A,d){var a,n,o,r;switch(a="on"===A.isEmoji?{name:"twemoji",main:"2/twemoji.amd.js"}:"",n="on"===A.isEmoji?"hypermd/powerpack/fold-emoji-with-twemoji":"",A.mathType){case"disable":r=o="";break;case"katex":o={name:"katex",main:"dist/katex.min.js"},r="hypermd/powerpack/fold-math-with-katex";break;case"mathjax":o={name:"mathjax",main:"MathJax.js"},r="hypermd/powerpack/fold-math-with-mathjax";break;default:r=o=""}requirejs.config({baseUrl:"//cdn.jsdelivr.net/npm/",packages:[{name:"hypermd",main:"everything.js"},{name:"codemirror",main:"lib/codemirror.js"},{name:"marked",main:"lib/marked.js"},{name:"turndown",main:"lib/turndown.browser.umd.js"},{name:"turndown-plugin-gfm",main:"dist/turndown-plugin-gfm.js"},o,a],waitSeconds:30}),require(["codemirror/lib/codemirror","hypermd/core","hypermd/mode/hypermd","hypermd/addon/click","hypermd/addon/cursor-debounce","hypermd/addon/fold","hypermd/addon/fold-code","hypermd/addon/fold-html","hypermd/addon/hide-token","hypermd/addon/hover","hypermd/addon/insert-file","hypermd/addon/mode-loader","hypermd/addon/paste","hypermd/addon/read-link","hypermd/addon/skeleton","hypermd/addon/table-align","on"===A.isEmoji?"hypermd/addon/fold-emoji":"","disable"!==A.mathType?"hypermd/addon/fold-math":"","hypermd/keymap/hypermd","turndown-plugin-gfm","hypermd/powerpack/hover-with-marked","hypermd/powerpack/paste-with-turndown","on"===A.isMermaid?"hypermd/powerpack/fold-code-with-mermaid":"","smms"===A.imagePaste?"hypermd/powerpack/insert-file-with-smms":"",r,n],function(e,a){"use strict";var n=h.getElementById("content"),l=a.fromTextArea(n,{mode:{name:"hypermd",strikethrough:!0,taskLists:!0,front_matter:!1,orgModeMarkup:!1,hashtag:!1,math:"disable"!==A.mathType,table:!0,toc:!0,emoji:"on"===A.isEmoji},hmdHover:"on"===A.isHover,hmdClick:"on"===A.isClick,hmdPaste:"on"===A.isPaste,hmdFold:{image:!0,link:!0,math:"disable"!==A.mathType,html:!0,emoji:"on"===A.isEmoji,code:!0},hmdFoldCode:{mermaid:!0},hmdModeLoader:"~codemirror/",hmdHideToken:"on"===A.isHideToken,hmdTableAlign:"on"===A.isTableAlign});l.setSize(null,"640px"),l.focus(),"local"===A.imagePaste&&l.setOption("hmdInsertFile",{byPaste:!0,byDrop:!0,fileHandler:function(e,o){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAP1BMVEWIioX29/bu7uz+//79/f3S0tL09PPy8vHw8O74+fjMAADU2ND6+vr39/bY3NW9vrzp6ubl5+Pi5N/e4duytLE6MtxfAAAAbUlEQVQY022PSRLDMAgEgZBhMXLW/781cqKDYrtvdPWBoRvNbOflD+qCZ7rQdX09H3dxcClvxeKQgX2LRSRFPGdhaRnmgiHcIgMw559wQ0Y2hrUheh+9YdQQaFFa1aCnf+jh0+sE77co0Xs3/wNPXARclYchfgAAAABJRU5ErkJggg==",m="undefined"!=typeof URL,i="hmd-file-uploaded",t=0,a=document.createElement("span");a.className="smms-hosted-items",o.setPlaceholder(a);for(var l=[],n=0;n<e.length;n++){var A=e[n];if(/image\//.test(A.type)){var d=m?URL.createObjectURL(A):"data:image/gif;base64,R0lGODlhEAAQAMMMAAQEBIGBgby8vEJCQtzc3GJiYqCgoC8vL8zMzFRUVBkZGY+Pj+rq6nJycq2trQAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJDAAPACwAAAAAEAAQAAAEVvDJSat9rDV2JSOPcRzGg4AUUwxnkjACcKASMQwCFShATiG+CSERSBE4HYohsegQEEhDoXl5ohjQpOVpYSAnjECD9iA4gpNFACTIwRBJxmLx1Z60eEkEACH5BAkIAA8ALAEAAQAOAA4AAARQ8EnJQmAzM/LEOMJDYFRTEITFCMdAEkUSTotyIBMyT4wzb6SMBLFAOBoG4eQAGAiQSgkzAYyKFpzHRhmUGLAaBG7iWGDEWkRWaXBYM4RxJgIAIfkECQwADwAsAQABAA4ADgAABE/wScnWYjNPkZJ4BDYtQWgxyJCITFAQmXEMsEQg2iPgtpgjC4Qg8Mk9BooCsJhDNkBGm6HG8NkSgYxjmmkAAEyEA0OAOQCKmkYoEag15VwEACH5BAkIAA8ALAEAAQAOAA4AAARO8EnJjGMzT9IaeQQ2OcZHPkjRiI+xfJOQFCwBZwKi7RTCEI6bpjEIAHW8xmHByzB8ExbFgZQgoBOD4nAj+BCHA0IQFkoCAAAzxCMkEuYIACH5BAkMAA8ALAEAAQAOAA4AAARP8MmJ0LyXhcWwFEIHPsTWSY5BXEjTnA+zYsjsYTLDCDa2DCre7RFIGIYTBuJU7D0Elg8A0Lg4DoMZQQFQDQYIwSABI1gWCsWRALsQCg1nBAAh+QQJCAAPACwBAAEADgAOAAAETPDJSci82BlMkUQeYTgXyFzEsl0nVn2LwEkMwQzAMT9G4+C6WU/AWFhmtRbC0ZoIjg/CQbGSCBKFlvRADAQYiEKjWXsIDgOZDeltSiIAIfkECQwADwAsAQABAA4ADgAABE7wyUnIvI8gKTbOCuA8jMU43iMAQHMRzjg1ifUyErKkWPkUisGHExAAE0PVjmCwDZ0IwQfhJAwGslyjgSNdBYzFotRYXHyCREKaJIm7kwgAIfkEBQgADwAsAQABAA4ADgAABE3wSUlKITMzHABYmcQMh0AMA4ZgEnIo4MQgSCY4TJiLyB5mgUHj13IQgkMiwTjzEScEwY/AelQSUujCIGsUeg4Dg7FwaDCERqP6NJhDEQA7",s=A.name.match(/[^\\\/]+\.\w+$/)[0],h=document.createElement("img");h.onload=p,h.className="hmd-file-uploading",h.src=d,a.appendChild(h);var c={blobURL:d,name:s,url:null,placeholder:h};l.push(c),t++;var g=new FileReader;g.readAsDataURL(A),g.onload=function(e){var a,n,A=e.target.result;a=A,n=E.bind(null,c),$.ajax({url:ajaxurl,type:"POST",data:{action:"imagepaste_action",dataurl:a},success:function(e){var a=JSON.parse(e);n(a.url)}})}}}return 0<l.length;function p(){o.resize()}function E(e,a){e.url=a||"error";var n=e.placeholder;n.className=i;var A=function(e){m&&URL.revokeObjectURL(e.blobURL);if(0==--t){var a=l.map(function(e){return"!["+e.name+"]("+e.url+")"});o.finish(a.join(" ")+" ")}}.bind(null,e);if(a){var d=document.createElement("img");d.addEventListener("load",A,!1),d.addEventListener("error",A,!1),d.src=a}else n.src=r,A()}}}),l.on("change",function(e){n.value=e.getValue()});var s=d.media.editor.insert;d.media.editor.insert=function(e){var a=h.createElement("div");a.style.display="none",a.id="htmlDom",a.innerHTML=e,h.body.appendChild(a);var n,A,d,o,r,m,i=h.getElementById("htmlDom").childNodes[0];switch(i.localName){case"a":n="img"===i.childNodes[0].localName?"[![]("+i.childNodes[0].src+")]("+i.href+")":"["+i.innerText+"]("+i.href+")";break;case"img":var t=h.getElementsByClassName("alignnone")[0].src;n="!["+h.getElementsByClassName("alignnone")[0].alt+"]("+t+")";break;default:n=h.getElementById("htmlDom").innerHTML}s(n),A=n,d=l.getDoc(),o=d.getCursor(),r=d.getLine(o.line),m={line:o.line,ch:r.length-1},d.replaceRange(A,m),h.getElementById("htmlDom").remove()}})}(document,window,window.WPHyperMD,window.wp);